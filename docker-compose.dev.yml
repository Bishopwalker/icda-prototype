# Development override - enables auto-reload on code changes
# Usage: docker-compose -f docker-compose.yml -f docker-compose.dev.yml up

services:
  icda:
    build:
      context: .
      dockerfile: Dockerfile.dev
    volumes:
      # Mount source code for live reload
      - ./main.py:/app/main.py:ro
      - ./icda:/app/icda:ro
      - ./customer_data.json:/app/customer_data.json:ro
      - ./knowledge:/app/knowledge:ro
      - ./frontend/dist:/app/frontend/dist:ro
    environment:
      - WATCHFILES_FORCE_POLLING=true
    command: ["python", "-m", "uvicorn", "main:app", "--host", "0.0.0.0", "--port", "8000", "--reload", "--reload-dir", "/app"]
